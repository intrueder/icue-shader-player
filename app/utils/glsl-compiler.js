module.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t){let n={vec:function(e){if(!(this instanceof n.vec)){for(var t=[],i=0;i<arguments.length;++i)arguments[i]instanceof n.vec?t=t.concat(arguments[i].get().slice()):"number"==typeof arguments[i]&&t.push(arguments[i]);return new n.vec(t)}return this.d=e,this}};const i={x:0,r:0,s:0,y:1,g:1,t:1,z:2,b:2,p:2,w:3,a:3,q:3};n.vec.prototype={constructor:n.vec,vectype:!0,clone:function(){switch(this.dimensions()){case 2:return new n.Vec2(this.d.slice());case 3:return new n.Vec3(this.d.slice());case 4:return new n.Vec4(this.d.slice());default:throw new Error("Invalid instance of Runtime.vec")}},cast:function(e){if(void 0===e||e===this.dimensions()){switch(this.dimensions()){case 2:return new n.Vec2(this.d.slice());case 3:return new n.Vec3(this.d.slice());case 4:return new n.Vec4(this.d.slice())}return this}if(e<this.dimensions())return this.d.splice(e,this.dimensions()-e),this.cast();if(1==this.dimensions()){for(var t=1;t<e;++t)this.d.push(this.d[0]);return this.cast()}return this},get:function(e){if(void 0===e)return this.d;if("string"==typeof e){const t=this.dimensions();let r=[];for(let n=0;n<e.length;++n){const o=i[e.charAt(n)];if(!(null!=o&&o<t))throw new Error("Unknown field or index selector character '"+e.charAt(n)+"' for Runtime.vec");r.push(this.d[o])}switch(r.length){case 1:return r[0];case 2:return new n.Vec2(r);case 3:return new n.Vec3(r);case 4:return new n.Vec4(r);default:return null}}return e>=this.dimensions()?null:this.d[e]},set:function(e,t){if("number"==typeof e)return e<this.dimensions()&&(this.d[e]=t),this;if("string"==typeof e){for(var n=0;n<e.length;++n){const r="number"==typeof t?t:t.get(n),o=i[e.charAt(n)];if(null==o)throw new Error("Unknown field or index selector character '"+e.charAt(n)+"' for Runtime.vec");this.set(o,r)}return this}throw new Error("Unknown field or index selector '"+e+"' for Runtime.vec")},dimensions:function(){return this.d.length},add:function(e){let t=this.clone();if(e instanceof n.vec)for(var i=0;i<t.d.length;++i)t.d[i]+=e.d[i];else{if("number"!=typeof e)throw new Error("Unexpected argument to vec.add");for(i=0;i<t.d.length;++i)t.d[i]+=e}return t},negate:function(){let e=this.clone();for(let t=0;t<e.d.length;++t)e.d[t]=-e.d[t];return e},subtract:function(e){let t=this.clone();if(e instanceof n.vec)for(var i=0;i<t.d.length;++i)t.d[i]-=e.d[i];else{if("number"!=typeof e)throw new Error("Unexpected argument to vec.subtract");for(i=0;i<t.d.length;++i)t.d[i]-=e}return t},multiply:function(e){let t=this.clone();if(e instanceof n.vec){if(!t._op_check(e))return;for(var i=0;i<t.d.length;++i)t.d[i]*=e.d[i];return t}for(i=0;i<t.d.length;++i)t.d[i]*=e;return t},divide:function(e){let t=this.clone();if(e instanceof n.vec)for(var i=0;i<t.d.length;++i)t.d[i]/=e.d[i];else{if("number"!=typeof e)throw new Error("Unexpected argument to vec.divide");e=e||1e-7;for(i=0;i<t.d.length;++i)t.d[i]/=e}return t},equal:function(e){if(this._op_check(e)){for(var t=0;t<this.d.length;++t)if(this.d[t]!=e.d[t])return!1;return!0}},dot:function(e){if(this._op_check(e)){for(var t=0,n=0;n<this.d.length;++n)t+=this.d[n]*e.d[n];return t}},normalize:function(){let e=this.clone();for(var t=e.length(),n=0;n<e.d.length;++n)e.d[n]/=t;return e},length:function(){return Math.sqrt(this.length2())},length2:function(){for(var e=0,t=0;t<this.d.length;++t)e+=this.d[t]*this.d[t];return e},_op_check:function(e){return e instanceof n.vec?e.dimensions()==this.dimensions()||(console.error("unable to operate on two vecs of different dimensions."),!1):(console.error("argument to vec operation is not a vec."),!1)}},n.Vec2=function(e){return this instanceof n.Vec2?2==e.length?(this.d=e,this):void console.error("2 arguments to Vec2 is expected."):n.vec.apply(null,arguments).cast(2)},n.Vec2.prototype={constructor:n.Vec2,__proto__:n.vec.prototype},n.Vec3=function(e){return this instanceof n.Vec3?3==e.length?(this.d=e,this):void console.error("3 arguments to Vec3 is expected."):n.vec.apply(null,arguments).cast(3)},n.Vec3.prototype={constructor:n.Vec3,__proto__:n.vec.prototype},n.Vec3.prototype.cross=function(e){return 3!=e.dimensions()&&console.error("arguments to Vec3.cross() should be Vec3."),n.Vec3(this.get(1)*e.get(2)-this.get(2)*e.get(1),this.get(2)*e.get(0)-this.get(0)*e.get(2),this.get(0)*e.get(1)-this.get(1)*e.get(0))},n.Vec4=function(e){return this instanceof n.Vec4?4==e.length?(this.d=e,this):void console.error("4 arguments to Vec4 is expected."):n.vec.apply(null,arguments).cast(4)},n.Vec4.prototype={constructor:n.Vec4,__proto__:n.vec.prototype},e.exports={vec:n.vec,Vec2:n.Vec2,Vec3:n.Vec3,Vec4:n.Vec4}},function(e,t,n){var i={};i.vec=n(0).vec,i.mat=function(e){if(!(this instanceof i.mat)){var t=[];if(arguments[0]instanceof i.mat){for(var n=arguments[0].d.length,r=0;r<n;r++)t.push(arguments[0].d[r].slice());return new i.mat(t)}if(arguments[0]instanceof i.vec){for(n=arguments.length,r=0;r<n;r++)t.push([]);for(r=0;r<n;r++)for(var o=0;o<n;o++)o<arguments[r].dimensions()?t[o].push(arguments[r].get(o)):t[o].push(0);return new i.mat(t)}for(n=Math.floor(Math.sqrt(arguments.length)),r=0;r<n;r++)t.push([]);for(r=0;r<n;r++)for(o=0;o<n;o++)t[o].push(arguments[r*n+o]);return new i.mat(t)}return this.d=e,this},i.mat.prototype={constructor:i.mat,cast:function(){if(0==arguments.length||arguments[0]==this.dimensions()){switch(this.dimensions()){case 2:return new i.Mat2(this.d);case 3:return new i.Mat3(this.d);case 4:return new i.Mat4(this.d)}return this}var e=arguments[0];if(e<this.dimensions()){for(var t in this.d.splice(e,this.dimensions()-e),this.d)this.d[t].splice(e,this.d[t].length-e);return this.cast()}var n=1==this.dimensions()?this.d[0][0]:1;for(var t in this.d)for(var r=this.dimensions();r<e;r++)this.d[t].push(0);for(t=this.dimensions();t<e;t++){this.d.push([]);for(r=0;r<e;r++)t==r?this.d[t].push(n):this.d[t].push(0)}return this.cast()},get:function(){if(0==arguments.length)return null;var e=arguments[0];if(e>=this.dimensions())return null;var t=i.vec.apply(null,this.d[e]);if(1==arguments.length)return t.cast();var n=arguments[1];return t.get(n)},set:function(){if(arguments.length<2)return this;var e=arguments[0];if(e>=this.dimensions())return this;if(2==arguments.length){for(var t=arguments[1],n=0;n<this.dimensions();n++)n<t.dimensions()?this.d[e][n]=t.get(n):this.d[e][n]=0;return this}n=arguments[1];var r=arguments[2];return"number"==typeof(t=i.vec.apply(null,this.d[e]).set(n,r))?(this.d[e][n]=t,this):(this.d[e]=t.d,this)},dimensions:function(){return this.d.length},equal:function(e){if(!this._op_check(e))return!1;if(this.dimensions()!=e.dimensions())return!1;for(var t=0;t<this.dimensions();t++)for(var n=0;n<this.dimensions();n++)if(this.d[t][n]!=e.d[t][n])return!1;return!0},add:function(e){return this._op(e,"+")},subtract:function(e){return this._op(e,"-")},matrixCompMult:function(e){return this._op(e,"*")},divide:function(e){return this._op(e,"/")},multiply:function(e){if(e instanceof i.mat){if(!this._op_check(e))return this;for(var t=i.mat(e).subtract(e),n=0;n<this.dimensions();n++)for(var r=0;r<this.dimensions();r++)for(var o=0;o<this.dimensions();o++)t.d[r][n]+=this.d[o][n]*e.d[r][o];return t}if(e instanceof i.vec){if(!this._op_check_vec(e))return this;for(t=i.vec(e).subtract(e),n=0;n<this.dimensions();n++){var s=0;for(r=0;r<this.dimensions();r++)s+=this.d[r][n]*e.get(r);t.set(n,s)}return t}for(n=0;n<this.dimensions();n++)for(r=0;r<this.dimensions();r++)this.d[n][r]*=e;return this},_op:function(e,t){if(!this._op_check(e))return this;for(var n=0;n<this.dimensions();n++)for(var i=0;i<this.dimensions();i++)"+"==t?this.d[n][i]+=e.d[n][i]:"-"==t?this.d[n][i]-=e.d[n][i]:"*"==t?this.d[n][i]*=e.d[n][i]:"/"==t&&(this.d[n][i]/=e.d[n][i]);return this},_op_check:function(e){return e instanceof i.mat?e.dimensions()==this.dimensions()||(console.error("unable to operate on two mats of different dimensions."),!1):(console.error("argument to mat operation is not a mat."),!1)},_op_check_vec:function(e){return e instanceof i.vec?e.dimensions()==this.dimensions()||(console.error("unable to operate on mat and vec of different dimensions."),!1):(console.error("argument is not a vec."),!1)}},i.Mat2=function(e){return this instanceof i.Mat2?2==e.length?(this.d=e,this):void console.error("2 arguments to Mat2 is expected."):i.mat.apply(null,arguments).cast(2)},i.Mat2.prototype={constructor:i.Mat2,__proto__:i.mat.prototype},i.Mat3=function(e){return this instanceof i.Mat3?3==e.length?(this.d=e,this):void console.error("3 dimensions of Mat3 is expected."):i.mat.apply(null,arguments).cast(3)},i.Mat3.prototype={constructor:i.Mat3,__proto__:i.mat.prototype},i.Mat4=function(e){return this instanceof i.Mat4?4==e.length?(this.d=e,this):void console.error("4 dimensions of Mat4 is expected."):i.mat.apply(null,arguments).cast(4)},i.Mat4.prototype={constructor:i.Mat4,__proto__:i.mat.prototype},e.exports={mat:i.mat,Mat2:i.Mat2,Mat3:i.Mat3,Mat4:i.Mat4}},function(e,t,n){const i={},r=n(0),o=n(3),s=n(4);i.vec=r.vec,i.Vec2=r.Vec2,i.Vec3=r.Vec3,i.Vec4=r.Vec4;const a={radians:e=>e instanceof i.vec?o._evalVec(e,a.radians):e/180*Math.PI,degrees:function(e){return e instanceof i.vec?o._evalVec(e,a.degrees):e/Math.PI*180},sin:function(e){return e instanceof i.vec?o._evalVec(e,a.sin):Math.sin(e)},cos:function(e){return e instanceof i.vec?o._evalVec(e,a.cos):Math.cos(e)},tan:function(e){return e instanceof i.vec?o._evalVec(e,a.tan):Math.tan(e)},asin:function(e){return e instanceof i.vec?o._evalVec(e,a.asin):Math.asin(e)},acos:function(e){return e instanceof i.vec?o._evalVec(e,a.acos):Math.acos(e)},atan:function(e,t){return void 0!==t?e instanceof i.vec?o._evalVec(e,t,a.atan):Math.atan2(e,t):e instanceof i.vec?o._evalVec(e,a.atan):Math.atan(e)},pow:function(e,t){return e instanceof i.vec?o._evalVec(e,t,a.pow):Math.pow(e,t)},exp:function(e){return e instanceof i.vec?o._evalVec(e,a.exp):Math.exp(e)},log:function(e){return e instanceof i.vec?o._evalVec(e,a.log):Math.log(e)},exp2:function(e){return e instanceof i.vec?o._evalVec(e,a.exp2):Math.pow(2,e)},log2:function(e){return e instanceof i.vec?o._evalVec(e,a.log2):Math.log(e)/Math.log(2)},sqrt:function(e){return e instanceof i.vec?o._evalVec(e,a.sqrt):Math.sqrt(e)},inversesqrt:function(e){return e instanceof i.vec?o._evalVec(e,a.inversesqrt):1/Math.sqrt(e)},abs:function(e){return e instanceof i.vec?o._evalVec(e,a.abs):e>=0?e:-e},sign:function(e){return e instanceof i.vec?o._evalVec(e,a.sign):0==e?0:e>0?1:-1},floor:function(e){return e.vectype?o._evalVec(e,a.floor):Math.floor(e)},ceil:function(e){return e instanceof i.vec?o._evalVec(e,a.ceil):Math.ceil(e)},round:function(e){return e instanceof i.vec?o._evalVec(e,a.round):Math.round(e)},int:function(e){return e instanceof i.vec?o._evalVec(e,a.int):Math.trunc(e)},fract:function(e){return e.vectype?o._evalVec(e,a.fract):e-a.floor(e)},mod:function(e,t){return e instanceof i.vec?o._evalVec(e,o._extVec(t,e),a.mod):e-Math.floor(e/t)*t},min:function(e,t){return e.vectype?o._evalVec(e,o._extVec(t,e),a.min):Math.min(e,t)},max:function(e,t){return e instanceof i.vec?o._evalVec(e,o._extVec(t,e),a.max):Math.max(e,t)},clamp:function(e,t,n){if(t>n)throw new Error("clamp(): maxVal must be larger than minVal.");return e instanceof i.vec?o._evalVec(e,o._extVec(t,e),o._extVec(n,e),a.clamp):a.min(a.max(e,t),n)},mix:function(e,t,n){return e instanceof i.vec?o._evalVec(e,t,o._extVec(n,e),a.mix):n*t+(1-n)*e},step:function(e,t){return t instanceof i.vec?o._evalVec(o._extVec(e,t),t,a.step):t<e?0:1},smoothstep:function(e,t,n){if(n instanceof i.vec)return o._evalVec(o._extVec(e,n),o._extVec(t,n),n,a.smoothstep);var r=a.clamp((n-e)/(t-e),0,1);return r*r*(3-2*r)},length:function(e){return o._checkNumber(e)?Math.abs(e):o._op_check(e)?e.length():null},distance:function(e,t){if(o._checkNumber(e,t))return Math.abs(e-t);if(!o._op_check(e,t))return null;var n=i.vec(e).subtract(t);return a.length(n)},dot:function(e,t){return o._checkNumber(e,t)?e*t:o._op_check(e,t)?e.dot(t):null},cross:function(e,t){if(3!=e.dimensions())throw new Error("cross(): parameters x and y must have 3 dimensions.");return o._op_check(e,t)?i.Vec3(e).cross(t):null},normalize:function(e){return o._checkNumber(e)?0==e?e:e/Math.abs(e):o._op_check(e)?e.normalize():null},faceforward:function(e,t,n){return o._op_check(t,e,n)?(a.dot(n,t)<0?i.vec(e):i.vec(e).negate()).cast():null},reflect:function(e,t){if(!o._op_check(e,t))return null;var n=2*a.dot(e,t);return i.vec(e).subtract(i.vec(t).multiply(n)).cast()},refract:function(e,t,n){if(!o._op_check(e,t))return null;var r=1-n*n*(1-a.dot(e,t)*a.dot(e,t));if(r<0)return i.vec(e).subtract(e);var s=n*a.dot(e,t)+Math.sqrt(r);return i.vec(e).multiply(n).subtract(i.vec(t).multiply(s)).cast()},matrixCompMult:function(e,t){return e.matrixCompMult(t)},lessThan:function(e,t){return o._compare(e,t,"<")},lessThanEqual:function(e,t){return o._compare(e,t,"<=")},greaterThan:function(e,t){return o._compare(e,t,">")},greaterThanEqual:function(e,t){return o._compare(e,t,">=")},equal:function(e,t){return o._compare(e,t,"==")},notEqual:function(e,t){return o._compare(e,t,"!=")},any:function(e){for(var t=0;t<e.dimensions();t++)if(e.get(t))return!0;return!1},all:function(e){for(var t=0;t<e.dimensions();t++)if(!e.get(t))return!1;return!0},not:function(e){for(var t=i.vec(e),n=0;n<e.dimensions();n++)t.set(n,e.get(n)?0:1);return t},texture2DLod:function(e,t,n){return s.texture2D(e,t,n)},texture2DProjLod:function(e,t,n){return s.texture2DProj(e,t,n)},textureCubeLod:function(e,t,n){return s.textureCube(e,t,n)},texture2D:function(e,t){return 3==arguments.length?s.texture2D(e,t,arguments[2]):s.texture2D(e,t)}};a.texture=a.texture2D,a.texture2DProj=function(e,t){return 3==arguments.length?s.texture2DProj(e,t,arguments[2]):s.texture2DProj(e,t)},a.textureCube=function(e,t){return 3==arguments.length?s.textureCube(e,t,arguments[2]):s.textureCube(e,t)},a.dump=console.log,e.exports=a},function(e,t,n){const i={},r=n(0);i.vec=r.vec,i.Vec2=r.Vec2,i.Vec3=r.Vec3,i.Vec4=r.Vec4;const o={_evalVec:function(){var e=arguments[arguments.length-1];let t=i.vec(arguments[0]).cast();for(var n=0;n<arguments[0].dimensions();n++){for(var r=[],o=0;o<arguments.length-1;o++)r.push(arguments[o].get(n));t.set(n,e.apply(this,r))}return t},_extVec:function(e,t){if(e.vectype)return e;switch(t.dimensions()){case 2:return i.Vec2(e);case 3:return i.Vec3(e);case 4:return i.Vec4(e)}return e},_compare:function(e,t,n){var r=i.vec(e).subtract(e);if("<"==n)for(var o=0;o<e.dimensions();o++)r.set(o,e.get(o)<t.get(o)?1:0);else if("<="==n)for(o=0;o<e.dimensions();o++)r.set(o,e.get(o)<=t.get(o)?1:0);else if(">"==n)for(o=0;o<e.dimensions();o++)r.set(o,e.get(o)>t.get(o)?1:0);else if(">="==n)for(o=0;o<e.dimensions();o++)r.set(o,e.get(o)>=t.get(o)?1:0);else if("=="==n)for(o=0;o<e.dimensions();o++)r.set(o,e.get(o)==t.get(o)?1:0);else if("!="==n)for(o=0;o<e.dimensions();o++)r.set(o,e.get(o)!=t.get(o)?1:0);return r},_op_check:function(...e){for(let t=0;t<e.length;t++){if(!(e[t]instanceof i.vec))throw new Error("Expected argument to be instanceof Runtime.vec!");if(t>0&&e[t].dimensions()!=e[t-1].dimensions())throw new Error("Expected binary operands to have the same dimensions!")}return!0},_checkNumber:function(...e){for(let t=0;t<e.length;t++)if("number"!=typeof e[t])return!1;return!0},inc:function(e){return e instanceof i.vec?this._evalVec(e,o.inc):e+1},dec:function(e){return e instanceof i.vec?this._evalVec(e,o.dec):e-1},pos:function(e){return e instanceof i.vec?this._evalVec(e,o.pos):+e},neg:function(e){return e instanceof i.vec?this._evalVec(e,o.neg):-e},bnot:function(e){return e instanceof i.vec?this._evalVec(e,o.bnot):~e},lnot:function(e){return e instanceof i.vec?this._evalVec(e,o.lnot):!e},mod:function(e,t){return e instanceof i.vec?this._evalVec(e,this._extVec(t,e),o.mod):e-Math.floor(e/t)*t},shl:function(e,t){return e instanceof i.vec?this._evalVec(e,t,o.shl):e<<t},shr:function(e,t){return e instanceof i.vec?this._evalVec(e,t,o.shr):e>>t},lt:function(e,t){return e instanceof i.vec?this._evalVec(e,t,o.lt):e<t},gt:function(e,t){return e instanceof i.vec?this._evalVec(e,t,o.gt):e>t},le:function(e,t){return e instanceof i.vec?this._evalVec(e,t,o.le):e<=t},ge:function(e,t){return e instanceof i.vec?this._evalVec(e,t,o.ge):e>=t},band:function(e,t){return e instanceof i.vec?this._evalVec(e,t,o.band):e&t},bxor:function(e,t){return e instanceof i.vec?this._evalVec(e,t,o.bxor):e^t},bor:function(e,t){return e instanceof i.vec?this._evalVec(e,t,o.bor):e|t},land:function(e,t){return e instanceof i.vec?this._evalVec(e,t,o.land):e&&t},lxor:function(e,t){return e instanceof i.vec?this._evalVec(e,t,o.lxor):e&&!t||!e&&t},lor:function(e,t){return e instanceof i.vec?this._evalVec(e,t,o.lor):e||t}};e.exports=o},function(e,t,n){(function(t,i){const r=n(0),o=n(9),s={};s.vec=r.vec,s.Vec3=r.Vec3,s.Vec4=r.Vec4;const a={textures:{},sampler:function(e,t){this.type=e,this.name=t},textureLoad:function(e,t){let n=new Image;n.src=t,n.onload=()=>{const t=n.width,i=n.height;let r=o(n),s=[];for(let e=0;e<t;e++){s.push([]);for(let n=0;n<i;n++){s[e].push([]);for(let o=0;o<4;o++)s[e][n].push(r[4*((i-n)*t+e)+o]/256)}}this.textureAdd(new a.sampler("2D",e),2,s)}},textureAdd:function(e,t,n){var i=e.name;this.textures[i]={dimension:t,data:n,nx:n.length,ny:n[0].length,nz:n[0][0].length}},texture2D:function(e,t){if(2==t.dimensions())return this._textureX(e,t);throw new Error("dimension of coord is not equal to 2.")},textureCube:function(e,t){if(3==t.dimensions())return this._textureX(e,t);throw new Error("dimension of coord is not equal to 3.")},texture2DProj:function(e,t){return 3==t.dimensions()?this._textureX(e,t.get("xy").divide(t.get(2))):4==t.dimensions()?this._textureX(e,t.get("xy").divide(t.get(3))):void 0}},c=e=>{let t=e%1;return t>=0?t:1+t};a._textureX=function(e,t){var n=this.textures[e.name],i=n.data;if(t instanceof s.vec&&2==t.dimensions()){var r=c(t.get(0))*(n.nx-1),o=c(t.get(1))*(n.ny-1),a=Math.floor(r),u=Math.floor(o),l=r-a,h=(_=Math.ceil(r))-r,f=o-u,d=(g=Math.ceil(o))-o,v=[];for(let e in i[a][u])u==g&&a==_?v.push(i[a][u][e]):u==g?v.push(l*i[a][u][e]+h*i[_][u][e]):a==_?v.push(f*i[a][u][e]+d*i[a][g][e]):v.push(f*(l*i[a][u][e]+h*i[_][u][e])+d*(l*i[a][g][e]+h*i[_][g][e]));return s.Vec4.apply(null,v)}if(t instanceof s.vec&&3==t.dimensions()){r=t.get(0)*n.nx-1,o=t.get(1)*n.nx-1;var p=t.get(2)*n.nx-1,m=(a=Math.floor(r),u=Math.floor(o),Math.floor(p)),_=Math.ceil(r),g=Math.ceil(o),b=Math.ceil(p),y=(l=r-a,h=_-r,f=o-u,d=g-o,p-m),V=b-p;v=[];for(var x in i[a][u][m])a==_&&u==g&&m==b?v.push(i[a][u][m][x]):a==_&&u==g?v.push(y*i[a][u][m][x]+V*i[a][u][b][x]):u==g&&m==b?v.push(l*i[a][u][m][x]+h*i[_][u][m][x]):m==b&&a==_?v.push(f*i[a][u][m][x]+d*i[a][g][m][x]):a==_?v.push(f*(y*i[a][u][m][x]+V*i[a][u][b][x])+d*(y*i[a][g][m][x]+V*i[a][g][b][x])):u==g?v.push(l*(y*i[a][u][m][x]+V*i[a][u][b][x])+h*(y*i[_][u][m][x]+V*i[_][u][b][x])):m==b?v.push(f*(l*i[a][u][m][x]+h*i[_][u][m][x])+d*(l*i[a][g][m][x]+h*i[_][g][m][x])):v.push(l*f*(y*i[a][u][m][x]+V*i[a][u][b][x])+l*d*(y*i[a][g][m][x]+V*i[a][g][b][x])+h*f*(y*i[_][u][m][x]+V*i[_][u][b][x])+h*d*(y*i[_][g][m][x]+V*i[_][g][b][x]));return s.Vec4.apply(null,v)}};const u=(t.resourcesPath||i)+"/images/";a.textureLoad("iChannel0",u+"tex16.png"),a.textureLoad("iChannel1",u+"tex12.png"),a.textureLoad("iChannel2",u+"ms.png"),a.textureLoad("iChannel3",u+"tex00.jpg"),e.exports=a}).call(this,n(8),"/")},function(e,t,n){const i={};i.vec=n(0).vec,i.mat=n(1).mat;const r=n(3),o={op_inc:e=>r.inc(e),op_dec:e=>r.dec(e),op_pos:e=>r.pos(e),op_neg:e=>r.neg(e),op_bnot:e=>r.bnot(e),op_lnot:e=>r.lnot(e),op_eq:(e,t)=>e instanceof i.vec&&t instanceof i.vec?e.equal(t):e instanceof i.mat&&t instanceof i.mat?e.equal(t):"object"!=typeof e&&"object"!=typeof rjs&&e==t,op_neq:(e,t)=>!o.op_eq(e,t),op_mul:(e,t)=>{const n=!(e instanceof i.vec||e instanceof i.mat),r=!(t instanceof i.vec||t instanceof i.mat);return n&&r?e*t:n?t.multiply(e):r?e.multiply(t):e instanceof i.vec&&t instanceof i.mat?t.multiply(e):e.multiply(t)},op_div:(e,t)=>{if(e instanceof i.vec&&t instanceof i.mat)throw new Error("op_div cannot handle vec / mat");if(e instanceof i.mat&&t instanceof i.vec)throw new Error("op_div cannot handle mat / vec");if(e instanceof i.vec||e instanceof i.mat)return e.divide(t);if("number"==typeof e&&t instanceof i.vec){return r._extVec(e,t).divide(t)}return t instanceof i.vec||t instanceof i.mat?t.divide(e):e/t},op_mod:(e,t)=>r.mod(e,t),op_add:(e,t)=>{if(e instanceof i.vec&&t instanceof i.mat)throw new Error("op_add cannot handle vec + mat");if(e instanceof i.mat&&t instanceof i.vec)throw new Error("op_add cannot handle mat + vec");return e instanceof i.vec||e instanceof i.mat?e.add(t):t instanceof i.vec||t instanceof i.mat?t.add(e):e+t},op_sub:(e,t)=>{if(e instanceof i.vec&&t instanceof i.mat)throw new Error("op_sub cannot handle vec - mat");if(e instanceof i.mat&&t instanceof i.vec)throw new Error("op_sub cannot handle mat - vec");return e instanceof i.vec||e instanceof i.mat?e.subtract(t):t instanceof i.vec||t instanceof i.mat?t.negate().add(e):e-t},op_shl:(e,t)=>r.shl(e,t),op_shr:(e,t)=>r.shr(e,t),op_lt:(e,t)=>r.lt(e,t),op_gt:(e,t)=>r.gt(e,t),op_le:(e,t)=>r.le(e,t),op_ge:(e,t)=>r.ge(e,t),op_band:(e,t)=>r.band(e,t),op_bxor:(e,t)=>r.bxor(e,t),op_bor:(e,t)=>r.bor(e,t),op_land:(e,t)=>r.land(e,t),op_lxor:(e,t)=>r.lxor(e,t),op_lor:(e,t)=>r.lor(e,t),op_get:(...e)=>{if(!e.length)return;const t=e[0];return t instanceof i.vec?e.length<2?t:t.get(e[1]):t instanceof i.mat?e.length<2?t:2===e.length?t.get(e[1]):t.get(e[1],e[2]):t},op_set:(...e)=>{if(!e.length)return;const t=e[0];return t instanceof i.vec?e.length<3?t:t.set(e[1],e[2]):t instanceof i.mat?e.length<3?t:3===e.length?t.set(e[1],e[2]):t.set(e[1],e[2],e[3]):t}};e.exports=o},function(e,t,n){const i=n(7),r=n(10);e.exports={stdlib:i,generator:r}},function(e,t,n){var i={},r=n(0);i.vec=r.vec,i.Vec2=r.Vec2,i.Vec3=r.Vec3,i.Vec4=r.Vec4;var o=n(1);i.mat=o.mat,i.Mat2=o.Mat2,i.Mat3=o.Mat3,i.Mat4=o.Mat4;var s=n(2),a=n(5),c=n(4);for(var u in a)i[u]=a[u];for(var u in s)i[u]=s[u];for(var u in c)i[u]=c[u];e.exports=i},function(e,t){var n,i,r=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(e){i=s}}();var c,u=[],l=!1,h=-1;function f(){l&&c&&(l=!1,c.length?u=c.concat(u):h=-1,u.length&&d())}function d(){if(!l){var e=a(f);l=!0;for(var t=u.length;t;){for(c=u,u=[];++h<t;)c&&c[h].run();h=-1,t=u.length}c=null,l=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function v(e,t){this.fun=e,this.array=t}function p(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new v(e,t)),1!==u.length||l||a(d)},v.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t){var n,i;e.exports=function(t,r){var o;(r=r||{}).x=r.x||0,r.y=r.y||0,r.width="number"==typeof r.width?r.width:t.width,r.height="number"==typeof r.height?r.height:t.height,n||(i=document.createElement("canvas"),n=i.getContext("2d")),i.width=r.width,i.height=r.height,n.clearRect(0,0,r.width,r.height),n.drawImage(t,r.x,r.y,r.width,r.height,0,0,r.width,r.height);try{o=n.getImageData(0,0,r.width,r.height)}catch(t){throw e.exports.dispose(),t}return o.data},e.exports.dispose=function(){n=void 0,i=void 0}},function(e,t,n){const i=n(2),r=n(5),o="$std",s=o+".",a="root",c="preprocessor",u="macro_call",l="function_call",h="function_prototype",f="function_declaration",d="scope",v="if_statement",p="for_statement",m="while_statement",_="do_statement",g="return",b="continue",y="break",V="discard",x="expression",k="declarator",w="declarator_item",M="invariant",C="precision",N="parameter",L="struct_definition",q="type",E="int",F="float",T="bool",j="identifier",I="operator",A="postfix",D="unary",P="binary",S="ternary",G="accessor",z="field_selector",O="    ",U={vec2:"Vec2",vec3:"Vec3",vec4:"Vec4",mat2:"Mat2",mat3:"Mat3",mat4:"Mat4"};class R{constructor(){this.reset()}reset(){this._currentIndent="",this._lines=[]}visitorForType(e){return e in R.Callbacks?R.Callbacks[e]:this.defaultVisitor}visitNode(e){if(e&&e.type)return this.visitorForType(e.type).call(this,e)}visitList(e){return e instanceof Array&&e.length?e.map(e=>this.visitNode(e)):[]}defaultVisitor(e){for(var t in e){var n=e[t];if(n instanceof Array)return this.visitList(n);if(n instanceof Object&&n.type)return this.visitNode(n)}}generate(e,t){this._globalVariableNames=this.getGlobals(e).map(e=>e.name),this.reset(),this.visitNode(e);const n=this._lines.join("\n");return t?n:new Function(o,"env",n)}getGlobals(e){let t=new $;return t.extract(e),t.uniforms.concat(t.varyings)}_addLine(e){this._lines.push([this._currentIndent,e].join(""))}_increaseIndent(){var e=this._currentIndent;return this._currentIndent=[this._currentIndent,O].join(""),e}_resolveGetName(e){return this._globalVariableNames.includes(e)?"env."+e:e}_resolveSetName(e,t){return this._globalVariableNames.includes(e)?"env."+e+" = "+t:e+" = "+t}_resolveGetLocal(e){return this._resolveGetName(e)}_resolveFunction(e){return e in i?s+e:e in r?s+e:e in U?s+U[e]:"float"===e?"":this._resolveGetName(e)}}R.Callbacks={},R.Callbacks[a]=function(e){this.visitList(e.statements);const t=e.statements.filter(e=>e.type==f&&e.name.startsWith("main")).reverse()[0].name;this._addLine(`${t}(${s}op_get(env.gl_FragCoord, 'xy'));`)},R.Callbacks[c]=function(e){return""},R.Callbacks[u]=function(e){return""},R.Callbacks[l]=function(e){var t=this.visitList(e.parameters).join(", "),n=this._resolveFunction(e.function_name);return n?n+"("+t+")":t},R.Callbacks[h]=function(e){return""},R.Callbacks[f]=function(e){let t=this.visitList(e.parameters);t=t.map(e=>this._resolveGetLocal(e),this),this._withinFunctionScope=e,this._addLine("const "+this._resolveGetLocal(e.name)+" = ("+t.join(", ")+") => {");var n=this._increaseIndent();this.visitNode(e.body);this._currentIndent=n,this._addLine("};"),delete this._withinFunctionScope},R.Callbacks[d]=function(e){return this.visitList(e.statements)},R.Callbacks[v]=function(e){var t=this.visitNode(e.condition);this._addLine("if ("+t+") {");var n=this._increaseIndent();if(this.visitNode(e.body),this._currentIndent=n,e.elseBody){this._addLine("} else {");n=this._increaseIndent();this.visitNode(e.elseBody),this._currentIndent=n}this._addLine("}")},R.Callbacks[p]=function(e){this._addLine("for ("),this.visitNode(e.initializer);var t=this.visitNode(e.condition)||"true",n=this.visitNode(e.increment);this._addLine(t+"; "+n+") {");var i=this._increaseIndent();this.visitNode(e.body),this._currentIndent=i,this._addLine("}")},R.Callbacks[m]=function(e){var t=this.visitNode(e.condition);this._addLine("while ("+t+") {");var n=this._increaseIndent();this.visitNode(e.body),this._currentIndent=n,this._addLine("}")},R.Callbacks[_]=function(e){var t=this.visitNode(e.condition);this._addLine("do {");var n=this._increaseIndent();this.visitNode(e.body),this._currentIndent=n,this._addLine("} while ("+t+");")},R.Callbacks[g]=function(e){e.value?this._addLine("return "+this.visitNode(e.value)+";"):this._addLine("return;")},R.Callbacks[b]=function(e){this._addLine("continue;")},R.Callbacks[y]=function(e){this._addLine("break;")},R.Callbacks[V]=function(e){this._addLine("discard;")},R.Callbacks[x]=function(e){this._addLine(this.visitNode(e.expression)+";")},R.Callbacks[k]=function(e){return!this._withinFunctionScope&&e.typeAttribute.qualifier&&"const"!==e.typeAttribute.qualifier?"":!e.typeAttribute.name.startsWith("vec")||1!==e.declarators.length||e.declarators[0].initializer?this.visitList(e.declarators).join(""):void this._addLine("let "+e.declarators[0].name.name+" = "+this._resolveFunction(e.typeAttribute.name)+"(0);")},R.Callbacks[w]=function(e){var t=this.visitNode(e.name);e.initializer?this._addLine("let "+t+" = "+this.visitNode(e.initializer)+";"):e.isArray?this._addLine("let "+t+" = [];"):this._addLine("let "+t+";")},R.Callbacks[M]=function(e){},R.Callbacks[C]=function(e){},R.Callbacks[N]=function(e){return e.name},R.Callbacks[L]=function(e){},R.Callbacks[q]=function(e){},R.Callbacks[E]=function(e){return Number(e.value)},R.Callbacks[F]=function(e){return Number(e.value_base10)},R.Callbacks[T]=function(e){return e.value?"true":"false"},R.Callbacks[j]=function(e){return this._resolveGetName(e.name)},R.Callbacks[I]=function(e){return e.operator},R.Callbacks[A]=function(e){var t=this.visitNode(e.operator),n=this.visitNode(e.expression),i=new X(e),r=i.params.slice(),o=null;switch(t){case"++":o="op_inc";break;case"--":o="op_dec";break;default:return r.unshift(this._resolveGetName(i.operand)),s+"op_get("+r.join(", ")+")"}var a=o?this._resolveFunction(o)+"("+n+")":"/* "+t+" */"+n;return(r=i.params.slice()).unshift(this._resolveGetLocal(i.operand)),r.push(a),i.params.length?this._resolveSetName(i.operand,s+"op_set("+r.join(", ")+")"):this._resolveSetName(i.operand,a)},R.Callbacks[D]=function(e){const t=this.visitNode(e.operator),n=this.visitNode(e.expression),i=e.expression.type;if(i&&("int"===i||"float"===i))return t+n;var r=null;switch(t){case"+":r="op_pos";break;case"-":r="op_neg";break;case"~":r="op_bnot";break;case"!":r="op_lnot";break;case"++":r="op_inc";break;case"--":r="op_dec";break;default:return"/* "+t+" */"+n}return this._resolveFunction(r)+"("+n+")"},R.Callbacks[P]=function(e){var t=this.visitNode(e.operator),n=this.visitNode(e.left),i=this.visitNode(e.right),r=null,o=!1;switch(t){case"==":r="op_eq";break;case"!=":r="op_neq";break;case"*":r="op_mul";break;case"/":r="op_div";break;case"%":r="op_mod";break;case"+":r="op_add";break;case"-":r="op_sub";break;case"<<":r="op_shl";break;case">>":r="op_shr";break;case"<":r="op_lt";break;case">":r="op_gt";break;case"<=":r="op_le";break;case">=":r="op_ge";break;case"&":r="op_band";break;case"^":r="op_bxor";break;case"|":r="op_bor";break;case"&&":r="op_land";break;case"^^":r="op_lxor";break;case"||":r="op_lor";break;case"=":o=!0;break;case"+=":r="op_add",o=!0;break;case"-=":r="op_sub",o=!0;break;case"*=":r="op_mul",o=!0;break;case"/=":r="op_div",o=!0;break;case"%=":r="op_mod",o=!0;break;case"<<=":r="op_shl",o=!0;break;case">>=":r="op_shr",o=!0;break;case"&=":r="op_band",o=!0;break;case"^=":r="op_bxor",o=!0;break;case"|=":r="op_bor",o=!0;break;default:return n+" /* "+t+" */ "+i}var a=r?this._resolveFunction(r)+"("+n+", "+i+")":i;if(o){var c=new X(e.left),u=c.params.slice();return u.unshift(this._resolveGetLocal(c.operand)),u.push(a),c.params.length?this._resolveSetName(c.operand,s+"op_set("+u.join(", ")+")"):this._resolveSetName(c.operand,a)}return a},R.Callbacks[S]=function(e){return"("+this.visitNode(e.condition)+") ? "+this.visitNode(e.is_true)+" : "+this.visitNode(e.is_false)},R.Callbacks[G]=function(e){},R.Callbacks[z]=function(e){};class X{constructor(e){this.operand=null,this.params=[],this.visitNode(e)}visitorForType(e){if(e in X.Callbacks)return X.Callbacks[e];throw new Error("Unexpected AST node encountered by selector builder: "+e)}visitNode(e){if(e&&e.type)return this.visitorForType(e.type).call(this,e)}}X.Callbacks={},X.Callbacks[E]=function(e){return this.params.push(e.value)},X.Callbacks[F]=function(e){return this.params.push(e.value)},X.Callbacks[j]=function(e){return this.operand=e.name},X.Callbacks[I]=function(e){this.visitNode(e.operator)},X.Callbacks[A]=function(e){this.visitNode(e.expression),this.visitNode(e.operator)},X.Callbacks[G]=function(e){this.visitNode(e.index)},X.Callbacks[z]=function(e){this.params.push("'"+e.selection+"'")};class ${constructor(){this.uniforms=[],this.attributes=[],this.varyings=[],this.errors=[]}visitorForType(e){return e in $.Functions?$.Functions[e]:this.defaultVisitor}visitNode(e){if(e&&e.type)return this.visitorForType(e.type).call(this,e)}visitList(e){if(e instanceof Array&&e.length)return e.map(e=>this.visitNode(e))}extract(e){this.visitNode(e),this.varyings.push({name:"gl_FragCoord",type:"vec4",qualifier:"varying",usage:"in",builtin:!0}),this.varyings.push({name:"gl_FrontFacing",type:"bool",qualifier:"varying",usage:"in",builtin:!0}),this.varyings.push({name:"gl_PointCoord",type:"vec2",qualifier:"varying",usage:"in",builtin:!0}),this.varyings.push({name:"gl_FragColor",type:"vec4",qualifier:"varying",usage:"out",builtin:!0}),this.varyings.push({name:"gl_FragData",type:"vec4[]",qualifier:"varying",usage:"out",builtin:!0})}defaultVisitor(e){}}$.Functions={},$.Functions[a]=function(e){this.visitList(e.statements)},$.Functions[w]=function(e){return this.visitNode(e.name)},$.Functions[j]=function(e){return e.name},$.Functions[k]=function(e){var t=e.typeAttribute,n=this.visitList(e.declarators);if("attribute"!==t.qualifier){var i=[];"varying"===t.qualifier&&(i=this.varyings),"uniform"===t.qualifier&&(i=this.uniforms),"attribute"===t.qualifier&&(i=this.attributes);var r=!0;"gl_FragColor"==t.name&&(r=!1);for(var o=0;o<n.length;++o)i.push({type:t.name,name:n[o],qualifier:t.qualifier,usage:r?"in":"out"})}else this.errors.push({node:e,message:"'attribute' variable not allowed in fragment shader."})},e.exports=new R}]);